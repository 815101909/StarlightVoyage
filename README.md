# 小舟摇星河小程序

## 项目概述
小舟摇星河是一个面向儿童的天文科普教育小程序，通过生动有趣的互动方式，帮助孩子们了解天文知识，培养科学兴趣。项目采用微信小程序云开发方案，结合了现代天文知识与中国传统星宿文化。

## 技术架构
### 前端技术栈
- 开发框架：微信小程序原生框架
- 开发语言：JavaScript
- 样式语言：WXSS
- 状态管理：微信小程序内置数据管理
- UI组件：自定义组件 + 微信小程序内置组件
- 富文本渲染：mp-html

### 后端技术栈
- 云开发：微信小程序云开发
- 数据库：云数据库
- 存储：云存储
- 云函数：Node.js

### 开发环境
- 开发工具：微信开发者工具
- Node.js版本：>=12.0.0
- 小程序基础库：>=2.19.0
- 依赖管理：npm

### 部署说明

#### 环境配置
1.  **开发环境**
    -   安装Node.js
    -   配置微信开发者工具
    -   开通云开发
    -   配置项目基础信息

2.  **云开发配置**
    -   创建云环境
    -   配置安全域名
    -   设置云函数触发器
    -   初始化数据库集合

#### 部署步骤
1.  **本地开发**
    ```bash
    # 安装依赖
    npm install

    # 运行本地服务
    npm run dev
    ```

2.  **云函数部署**
    ```bash
    # 云函数目录
    cd cloudfunctions

    # 安装依赖
    npm install

    # 部署云函数
    npm run deploy
    ```

## 功能模块

### 1. 欢迎页 (pages/welcome)
- **功能描述**：应用启动时的欢迎界面，引导用户了解应用。

### 2. 登录注册 (pages/login)
- **功能描述**：用户登录和注册功能，支持微信授权登录。

### 3. 文章详情 (pages/article_detail)
- **功能描述**：展示天文科普文章的详细内容。
- **主要特点**：富文本内容展示、图片预览、文章朗读、收藏和分享功能。

### 4. 探索发现 (pages/explore)
- **功能描述**：提供天文知识探索和学习的入口，可能包含发现、问答、任务等。

### 5. 观测记录 (pages/observe)
- **功能描述**：用户记录天文观测活动，支持图片上传和地理位置信息。

### 6. 星空探索 (pages/sky)
- **功能描述**：展示中国传统星宿文化，如28宿、星象变化等。

### 7. 用户中心 (pages/profile)
- **功能描述**：管理用户信息、会员状态、收藏、学习记录等。

### 8. 会员中心 (pages/member_center)
- **功能描述**：提供会员服务购买、会员权益展示等功能。

### 9. 账户设置 (pages/account)
- **功能描述**：用户进行账户相关设置，如修改密码、绑定手机等。

### 10. 收藏管理 (pages/collection)
- **功能描述**：管理用户收藏的文章、图片或其他内容。

### 11. 客户服务 (pages/customer_service)
- **功能描述**：提供用户反馈、问题咨询等客户服务入口。

### 12. 详情页 (pages/detail)
- **功能描述**：通用的内容详情展示页面，可能用于展示特定天文事件或知识点。

### 13. 练习与测试 (pages/exercises)
- **功能描述**：提供天文知识相关的练习题或小测试。

### 14. 星空许愿 (pages/star_wish)
- **功能描述**：用户可以在该页面许愿，许愿内容会被记录下来。

### 15. 打印页面 (pages/print_page)
- **功能描述**：用于生成可打印内容的页面。

### 16. 个人资料编辑 (pages/profile_edit)
- **功能描述**：编辑用户个人资料，如昵称、头像、签名等。

### 17. 记录管理 (pages/record, pages/record_detail, pages/record_editor)
- **功能描述**：用户创建、查看和编辑各类记录，如学习笔记、观测日志等。

### 18. 星体信息 (pages/star)
- **功能描述**：展示各类星体（如行星、恒星）的详细信息。

### 19. 星空打卡 (pages/starcheckin)
- **功能描述**：用户进行每日打卡，记录学习或观测的连续天数。

### 20. 系统消息 (pages/system_message)
- **功能描述**：接收和查看系统通知、公告等。


## 云开发架构

### 云函数
1.  **activity**: 活动相关功能。
2.  **auth**: 用户认证、权限验证、会话管理。
3.  **explore**: 探索相关功能。
4.  **lowcode-automation-preview**: 低代码自动化预览。
5.  **lowcode-automation**: 低代码自动化。
6.  **lowcode-datasource-preview**: 低代码数据源预览。
7.  **lowcode-datasource**: 低代码数据源。
8.  **member**: 会员相关功能。
9.  **observation**: 观测记录、图片处理、数据分析。
10. **profile**: 用户信息管理。
11. **starmap**: 星图生成、星象计算、数据转换。
12. **system**: 系统级功能。
13. **unlocked_chapters**: 解锁章节。
14. **updateExpiredMembers**: 更新过期会员。
15. **video**: 视频管理、播放控制、进度记录。
16. **wishes**: 心愿相关功能。
17. **wxpayFunctions**: 微信支付相关功能，包括订单、退款查询等。
18. **xsj_auth**: 晓视界认证。

### 数据库设计
1.  **users (用户集合)**
    -   存储用户基本信息、会员状态、学习记录、权限设置等。
2.  **member_orders (会员订单集合)**
    -   存储会员购买订单信息，包括订单号、支付状态、会员类型、有效期等。
3.  **articles (文章集合)**
    -   存储天文科普文章内容、分类标签、统计数据、关联资源等。
4.  **observations (观测记录集合)**
    -   存储用户观测数据、图片资源、位置信息、天气数据等。
5.  **tasks (任务集合)**
    -   存储任务配置、完成条件、奖励设置、进度追踪等。

## 项目特色
1.  **教育性**
    -   专业的天文知识
    -   中国传统文化融合
    -   趣味性学习方式
    -   互动式教学设计

2.  **技术创新**
    -   云开发架构
    -   富媒体处理
    -   实时数据更新
    -   性能优化

3.  **用户体验**
    -   界面美观
    -   操作流畅
    -   功能直观
    -   反馈及时

## 开发规范

### 代码规范
1.  **命名规范**
    -   文件命名：小写字母，下划线分隔
    -   变量命名：驼峰式
    -   常量命名：大写字母，下划线分隔
    -   组件命名：首字母大写驼峰式

2.  **注释规范**
    -   文件头部注释：描述文件功能
    -   函数注释：参数说明和返回值
    -   关键代码注释：实现逻辑说明
    -   TODO标记：待优化项

3.  **样式规范**
    -   使用rpx作为单位
    -   样式模块化
    -   主题色变量管理
    -   响应式设计

### Git规范
1.  **分支管理**
    -   main：主分支
    -   develop：开发分支
    -   feature/*：功能分支
    -   hotfix/*：修复分支

2.  **提交规范**
    -   feat：新功能
    -   fix：修复bug
    -   docs：文档更新
    -   style：代码格式
    -   refactor：重构
    -   test：测试相关
    -   chore：构建过程或辅助工具的变动

## 部署说明

### 环境配置
1. 开发环境
   - 安装Node.js
   - 配置微信开发者工具
   - 开通云开发
   - 配置项目基础信息

2. 云开发配置
   - 创建云环境
   - 配置安全域名
   - 设置云函数触发器
   - 初始化数据库集合

### 部署步骤
1. 本地开发
   ```bash
   # 安装依赖
   npm install

   # 运行本地服务
   npm run dev
   ```

2. 云函数部署
   ```bash
   # 云函数目录
   cd cloudfunctions

   # 安装依赖
   npm install

   # 部署云函数
   npm run deploy
   ```

## 更新日志

### v1.0.0 (2025-06)
-   初始版本发布
-   基础功能实现
-   云开发架构搭建

### v1.1.0 (2025-07)
-   优化文章展示
-   添加图片预览功能
-   改进用户体验

## 后续规划

### 近期计划
1.  **功能优化**
    -   优化图片加载
    -   完善错误处理
    -   改进用户反馈

2.  **新功能开发**
    -   社交分享增强
    -   学习数据分析
    -   个性化推荐

### 长期规划
1.  **产品升级**
    -   增加AR功能
    -   添加实时天象
    -   开发小游戏

2.  **技术升级**
    -   性能优化
    -   架构重构
    -   自动化测试

## 贡献指南
1.  Fork 项目
2.  创建功能分支
3.  提交变更
4.  发起Pull Request

## 联系方式
-   项目负责人：[联系方式]
-   技术支持：[支持邮箱]
-   问题反馈：[反馈渠道]

## 许可证
MIT License
