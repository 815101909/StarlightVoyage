<!--pages/explore/explore.wxml-->
<view class="container explore-page">
  <!-- é¡¶éƒ¨èƒŒæ™¯æ˜Ÿç©º -->
  <view class="explore-bg"></view>
  
  <!-- ç¬¬ä¸€éƒ¨åˆ†ï¼šé¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <text class="page-title">æ˜Ÿæ²³æ¬²è½¬åƒå¸†èˆ</text>
    <text class="page-subtitle">å®‹ä»£ Â· ææ¸…ç…§ Â· ã€Šæ¸”å®¶å‚²ã€‹</text>
  </view>
  
  <!-- ç¬¬äºŒéƒ¨åˆ†ï¼šæ¢ç´¢ä¸åœæ­‡ -->
  <view class="section explore-section">
    <view class="section-header">
      <text class="section-title">æ¢ç´¢ä¸åœæ­‡</text>
      <view class="date-picker-container">
        <picker mode="date" bindchange="dateChange">
          <view class="date-picker">
            <text class="date-picker-text">{{currentDate}}</text>
            <text class="date-picker-icon">â–¼</text>
          </view>
        </picker>
      </view>
    </view>
    
    <!-- åˆ‡æ¢æ ‡ç­¾ -->
    <view class="section-tabs">
      <view class="tab {{currentTab === 'news' ? 'active' : ''}}" bindtap="switchTab" data-tab="news">
        <text class="tab-icon">ğŸ”­</text>
        <text class="tab-text">å¤©æ–‡æ—¶äº‹</text>
      </view>
      <view class="tab {{currentTab === 'review' ? 'active' : ''}}" bindtap="switchTab" data-tab="review">
        <text class="tab-icon">ğŸ“–</text>
        <text class="tab-text">å¤©æ–‡å›é¡¾</text>
      </view>
    </view>
    
    <!-- å¤©æ–‡æ—¶äº‹å†…å®¹ -->
    <view class="tab-content" wx:if="{{currentTab === 'news'}}">
      <scroll-view scroll-y class="article-scroll-list" enable-flex show-scrollbar="{{true}}" bindscrolltolower="loadNewsArticles">
        <view class="article-list">
          <block wx:for="{{newsArticles}}" wx:key="id">
            <view class="article-card" bindtap="openArticle" data-id="{{item.id}}" data-type="news">
              <image class="article-image" src="{{item.coverUrl}}" mode="aspectFill"></image>
              <view class="article-info">
                <view class="article-title">{{item.title}}</view>
                <view class="article-meta">
                  <view class="article-tags">
                    <text class="article-tag">{{item.tag}}</text>
                    <text class="article-source">{{item.source}}</text>
                  </view>
                  <text class="article-date">{{item.date}}</text>
                </view>
              </view>
            </view>
          </block>
          
          <!-- åŠ è½½ä¸­çŠ¶æ€ -->
          <view class="loading-container" wx:if="{{isLoading}}">
            <view class="loading-icon"></view>
            <text class="loading-text">åŠ è½½ä¸­...</text>
          </view>
          
          <!-- æ²¡æœ‰æ›´å¤šæ•°æ® -->
          <view class="no-more" wx:if="{{!hasMore.news && newsArticles.length > 0}}">
            <text class="no-more-text">æ²¡æœ‰æ›´å¤šäº†</text>
          </view>
          
          <!-- ç©ºçŠ¶æ€ -->
          <view class="empty-state" wx:if="{{!isLoading && newsArticles.length === 0}}">
            <image class="empty-image" src="/assets/images/empty.png" mode="aspectFit"></image>
            <text class="empty-text">è¿™ä¸€å¤©æ²¡æœ‰å¤©æ–‡æ—¶äº‹</text>
          </view>
        </view>
      </scroll-view>
    </view>
    
    <!-- å¤©æ–‡å›é¡¾å†…å®¹ -->
    <view class="tab-content" wx:if="{{currentTab === 'review'}}">
      <scroll-view scroll-y class="article-scroll-list" enable-flex show-scrollbar="{{true}}" bindscrolltolower="loadReviewArticles">
        <view class="article-list">
          <block wx:for="{{reviewArticles}}" wx:key="id">
            <view class="article-card" bindtap="openArticle" data-id="{{item.id}}" data-type="review">
              <image class="article-image" src="{{item.coverUrl}}" mode="aspectFill"></image>
              <view class="article-info">
                <view class="article-title">{{item.title}}</view>
                <view class="article-meta">
                  <view class="article-tags">
                    <text class="article-tag">{{item.tag}}</text>
                    <text class="article-source">{{item.source}}</text>
                  </view>
                  <text class="article-date">{{item.date}}</text>
                </view>
              </view>
            </view>
          </block>
          
          <!-- åŠ è½½ä¸­çŠ¶æ€ -->
          <view class="loading-container" wx:if="{{isLoading}}">
            <view class="loading-icon"></view>
            <text class="loading-text">åŠ è½½ä¸­...</text>
          </view>
          
          <!-- æ²¡æœ‰æ›´å¤šæ•°æ® -->
          <view class="no-more" wx:if="{{!hasMore.review && reviewArticles.length > 0}}">
            <text class="no-more-text">æ²¡æœ‰æ›´å¤šäº†</text>
          </view>
          
          <!-- ç©ºçŠ¶æ€ -->
          <view class="empty-state" wx:if="{{!isLoading && reviewArticles.length === 0}}">
            <image class="empty-image" src="/assets/images/empty.png" mode="aspectFit"></image>
            <text class="empty-text">è¿™ä¸€å¤©æ²¡æœ‰å¤©æ–‡å›é¡¾</text>
          </view>
        </view>
      </scroll-view>
    </view>
  </view>
  
  <!-- ç¬¬ä¸‰éƒ¨åˆ†ï¼šå®‡å®™å°å‰§åœº -->
  <view class="section video-section">
    <view class="section-header">
      <text class="section-title">å®‡å®™å°å‰§åœº</text>
      <view class="date-picker-container">
        <picker mode="date" bindchange="videoDateChange">
          <view class="date-picker">
            <text class="date-picker-text">{{currentDate}}</text>
            <text class="date-picker-icon">â–¼</text>
          </view>
        </picker>
      </view>
    </view>
    
    <!-- è§†é¢‘åˆ—è¡¨ -->
    <scroll-view scroll-y class="video-content-scroll" enable-flex show-scrollbar="{{true}}" bindscrolltolower="loadMoreVideos">
      <view class="video-list">
        <block wx:for="{{videoList}}" wx:key="id">
          <view class="video-list-item" bindtap="playVideo" data-id="{{item.id}}">
            <view class="video-item-container">
              <image class="video-item-cover" src="{{item.coverUrl}}" mode="aspectFill"></image>
              <view class="video-item-play-icon">â–¶</view>
              <view class="video-item-duration">{{item.duration}}</view>
            </view>
            <view class="video-item-info">
              <view class="video-item-title">{{item.title}}</view>
              <view class="video-item-meta">
                <text class="video-item-date">{{item.date}}</text>
                <text class="video-item-views">{{item.views}}äººè§‚çœ‹</text>
              </view>
            </view>
          </view>
        </block>
        
        <!-- åŠ è½½ä¸­çŠ¶æ€ -->
        <view class="loading-container" wx:if="{{isLoading}}">
          <view class="loading-icon"></view>
          <text class="loading-text">åŠ è½½ä¸­...</text>
        </view>
        
        <!-- æ²¡æœ‰æ›´å¤šæ•°æ® -->
        <view class="no-more" wx:if="{{!hasMore.video && videoList.length > 0}}">
          <text class="no-more-text">æ²¡æœ‰æ›´å¤šäº†</text>
        </view>
        
        <!-- ç©ºçŠ¶æ€ -->
        <view class="empty-state" wx:if="{{!isLoading && videoList.length === 0}}">
          <image class="empty-image" src="/assets/images/empty.png" mode="aspectFit"></image>
          <text class="empty-text">è¿™ä¸€å¤©æ²¡æœ‰è§†é¢‘</text>
        </view>
      </view>
    </scroll-view>
  </view>
</view> 