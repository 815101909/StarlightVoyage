<view class="container account-page">
  <!-- 页面标题 -->
  <view class="page-header">
    <text class="page-title">账号与安全</text>
  </view>
  
  <!-- 加载中 -->
  <view class="loading-container" wx:if="{{isLoading}}">
    <view class="loading-icon"></view>
    <text class="loading-text">加载中...</text>
  </view>
  
  <block wx:if="{{!isLoading}}">
    <!-- 基本账号信息 -->
    <view class="info-section">
      <view class="section-title">基本信息</view>
      
      <view class="info-item">
        <text class="info-label">用户名</text>
        <text class="info-value">{{userInfo.nickName}}</text>
      </view>
      
      <view class="info-item" bindtap="updatePhoneNumber">
        <text class="info-label">手机号</text>
        <view class="info-value-container">
          <text class="info-value">{{userInfo.phoneNumber || '未绑定'}}</text>
          <text class="action-text">修改</text>
        </view>
      </view>
      
      <view class="info-item">
        <text class="info-label">最近登录</text>
        <text class="info-value">{{userInfo.lastLoginTime}}</text>
      </view>
    </view>
    
    <!-- 安全设置 -->
    <view class="security-section">
      <view class="section-title">安全设置</view>
      
      <view class="security-item" bindtap="changePassword">
        <view class="security-info">
          <text class="security-label">修改密码</text>
          <text class="security-desc">定期更换密码可以保障账号安全</text>
        </view>
        <text class="action-arrow">></text>
      </view>
    </view>
    
    <!-- 登录设备管理 -->
    <view class="devices-section">
      <view class="section-title">登录设备</view>
      
      <view class="devices-list">
        <view wx:for="{{loginDevices}}" wx:key="index" class="device-item">
          <view class="device-info">
            <text class="device-name">{{item.deviceName}}</text>
            <text class="device-time">登录时间: {{item.loginTime}}</text>
            <text class="device-current" wx:if="{{item.isCurrentDevice}}">当前设备</text>
          </view>
          <view class="device-action" wx:if="{{!item.isCurrentDevice}}" bindtap="logoutDevice" data-index="{{index}}">
            <text class="device-logout">注销</text>
          </view>
        </view>
      </view>
    </view>
    
    <!-- 账号注销 -->
    <view class="deactivate-section">
      <view class="deactivate-button" bindtap="deactivateAccount">注销我的账号</view>
      <text class="deactivate-hint">注销后，账号数据将被永久删除且无法恢复</text>
    </view>
  </block>
</view> 