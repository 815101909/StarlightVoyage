<view class="feedback-page">
  <!-- 反馈类型选择 -->
  <view class="feedback-section">
    <view class="section-title">选择反馈类型</view>
    <view class="feedback-types">
      <block wx:for="{{feedbackTypes}}" wx:key="id">
        <view 
          class="type-item {{item.checked ? 'type-active' : ''}}" 
          bindtap="selectFeedbackType"
          data-id="{{item.id}}">
          {{item.name}}
        </view>
      </block>
    </view>
  </view>

  <!-- 反馈内容输入 -->
  <view class="feedback-section">
    <view class="section-title">问题描述</view>
    <view class="feedback-content">
      <textarea 
        placeholder="请详细描述您遇到的问题或建议..." 
        placeholder-class="placeholder"
        value="{{feedbackContent}}"
        bindinput="inputFeedback"
        maxlength="500"
        auto-height="true"/>
      <view class="word-count">{{feedbackContent.length}}/500</view>
    </view>
  </view>

  <!-- 图片上传 -->
  <view class="feedback-section">
    <view class="section-title">截图（可选）</view>
    <view class="upload-tip">{{uploadTips}}</view>
    <view class="image-uploader">
      <!-- 已上传的图片列表 -->
      <block wx:if="{{uploadImgs.length > 0}}">
        <view class="image-list">
          <block wx:for="{{uploadImgs}}" wx:key="*this">
            <view class="image-item">
              <image 
                src="{{item}}" 
                mode="aspectFill" 
                bindtap="previewImage"
                data-index="{{index}}"/>
              <view 
                class="image-remove" 
                catchtap="removeImage"
                data-index="{{index}}">×</view>
            </view>
          </block>
        </view>
      </block>
      
      <!-- 添加图片按钮 -->
      <view class="upload-button" bindtap="uploadImage" wx:if="{{uploadImgs.length < maxImgCount}}">
        <view class="upload-icon">+</view>
        <view class="upload-text">添加图片</view>
      </view>
    </view>
  </view>

  <!-- 联系方式 -->
  <view class="feedback-section">
    <view class="section-title">联系方式（可选）</view>
    <view class="contact-input">
      <input 
        placeholder="请留下您的微信号/手机号/邮箱，方便我们联系您" 
        placeholder-class="placeholder"
        value="{{contactInfo}}"
        bindinput="inputContact"/>
    </view>
  </view>

  <!-- 提交按钮 -->
  <view class="submit-button-container">
    <button 
      class="submit-button {{isSubmitting ? 'submitting' : ''}}" 
      bindtap="submitFeedback"
      disabled="{{isSubmitting}}">
      {{isSubmitting ? '提交中...' : '提交反馈'}}
    </button>
  </view>
</view>